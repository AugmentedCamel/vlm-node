<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Job Runner</title>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Job Runner</h1>
        <button class="submit-btn" onclick="openSubmitDialog()">
          Submit Job
        </button>
      </div>

      <div id="status-message" class="status-message"></div>

      <table class="jobs-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Status</th>
            <th>Created At</th>
            <th>Updated At</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="jobs-tbody">
          <!-- Jobs will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- Submit Job Dialog -->
    <div
      id="submit-dialog-overlay"
      class="dialog-overlay"
      onclick="closeSubmitDialog(true)"
    >
      <div class="dialog">
        <div class="dialog-header">
          <h3 class="dialog-title">Submit New Job</h3>
          <div class="dialog-buttons">
            <button class="btn btn-primary" onclick="submitJob()">
              Submit
            </button>
          </div>
        </div>

        <div class="form-group">
          <label for="submit-job-type">Job Type:</label>
          <select id="submit-job-type" disabled>
            <option value="task_timing_v1" selected>Task Timing V1</option>
          </select>
        </div>

        <div class="form-group">
          <label for="submit-vlm-prompt">VLM Prompt:</label>
          <textarea
            id="submit-vlm-prompt"
            placeholder="How to describe the image?"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="submit-prompt">Prompt:</label>
          <textarea
            id="submit-prompt"
            placeholder="What event to detect?"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="submit-image-ids">Image IDs:</label>
          <textarea
            id="submit-image-ids"
            placeholder="Enter image IDs separated by newlines"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="submit-webhook-url">Webhook URL:</label>
          <input
            type="text"
            id="submit-webhook-url"
            placeholder="Enter webhook URL"
          />
        </div>

        <div class="form-group">
          <label for="submit-domain-id">Domain ID:</label>
          <input
            type="text"
            id="submit-domain-id"
            placeholder="Enter domain ID"
          />
        </div>

        <div id="submit-status-message" class="status-message"></div>
      </div>
    </div>

    <!-- Retry Job Dialog -->
    <div
      id="retry-dialog-overlay"
      class="dialog-overlay"
      onclick="closeRetryDialog(true)"
    >
      <div class="dialog">
        <div class="dialog-header">
          <h3 class="dialog-title">Retry Job</h3>
          <div class="dialog-buttons">
            <button class="btn btn-primary" onclick="retryJob()">Submit</button>
          </div>
        </div>

        <div class="form-group">
          <label for="retry-job-id">Job ID:</label>
          <input
            type="text"
            id="retry-job-id"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="retry-job-status">Status:</label>
          <input
            type="text"
            id="retry-job-status"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="retry-domain-id">Domain ID:</label>
          <input
            type="text"
            id="retry-domain-id"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="retry-image-ids">Image IDs:</label>
          <textarea
            id="retry-image-ids"
            readonly
            class="readonly-field"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="retry-vlm-prompt">VLM Prompt:</label>
          <textarea
            id="retry-vlm-prompt"
            placeholder="How to describe the image?"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="retry-prompt">Prompt:</label>
          <textarea
            id="retry-prompt"
            placeholder="What event to detect?"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="retry-webhook-url">Webhook URL:</label>
          <input
            type="text"
            id="retry-webhook-url"
            placeholder="Enter webhook URL"
          />
        </div>

        <div id="retry-status-message" class="status-message"></div>
      </div>
    </div>

    <!-- View Job Dialog -->
    <div
      id="view-dialog-overlay"
      class="dialog-overlay"
      onclick="closeViewDialog()"
    >
      <div class="dialog">
        <div class="dialog-header">
          <h3 class="dialog-title">View Job Details</h3>
        </div>

        <div class="form-group">
          <label for="view-job-id">Job ID:</label>
          <input type="text" id="view-job-id" readonly class="readonly-field" />
        </div>

        <div class="form-group">
          <label for="view-job-type">Job Type:</label>
          <input
            type="text"
            id="view-job-type"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="view-job-status">Status:</label>
          <input
            type="text"
            id="view-job-status"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="view-domain-id">Domain ID:</label>
          <input
            type="text"
            id="view-domain-id"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="view-image-ids">Image IDs:</label>
          <textarea
            id="view-image-ids"
            readonly
            class="readonly-field"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="view-vlm-prompt">VLM Prompt:</label>
          <textarea
            id="view-vlm-prompt"
            readonly
            class="readonly-field"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="view-prompt">Prompt:</label>
          <textarea id="view-prompt" readonly class="readonly-field"></textarea>
        </div>

        <div class="form-group">
          <label for="view-webhook-url">Webhook URL:</label>
          <input
            type="text"
            id="view-webhook-url"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="view-created-at">Created At:</label>
          <input
            type="text"
            id="view-created-at"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="view-updated-at">Updated At:</label>
          <input
            type="text"
            id="view-updated-at"
            readonly
            class="readonly-field"
          />
        </div>

        <div class="form-group">
          <label for="view-error">Error:</label>
          <div id="view-error" class="json-display"></div>
        </div>

        <div class="form-group">
          <label for="view-output">Output:</label>
          <div id="view-output" class="json-display"></div>
        </div>
      </div>
    </div>

    <script type="module" src="src/js/main.js"></script>
  </body>
</html>
